<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>Catalog Viewer</title>
    <link rel="icon" type="image/png" href="icon/32.png" />
    <link rel="apple-touch-icon" href="icon/180.png" />

    <style>
      /* ================= 1. Global Config & Layout ================= */
      :root {
        --header-height: 60px;
        --total-top-spacing: 60px;

        --sidebar-width: 300px;
        --accent-color: #000; /* ÂïÜÂä°Èªë */
        --bg-color: #f8f8f8;
        --font-main: "Helvetica Neue", Helvetica, Arial, sans-serif;

        /* Tag Colors */
        --tag-hot: #d9534f;
        --tag-new: #007bff;
        --tag-sale: #28a745;
      }

      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        margin: 0;
        padding: 0;
        padding-top: var(--total-top-spacing);
        padding-bottom: 110px;
        font-family: var(--font-main);
        background: var(--bg-color);
        color: #333;
        -webkit-font-smoothing: antialiased;
        overflow-x: hidden;
      }

      a {
        text-decoration: none;
        color: inherit;
        cursor: pointer;
      }
      button {
        outline: none;
        font-family: inherit;
        border: none;
        background: none;
        padding: 0;
      }

      /* ================= 2. Header ================= */
      .site-header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: var(--header-height);
        background-color: #000;
        color: #fff;
        display: flex;
        align-items: center;
        padding: 0 10px;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        gap: 10px;
      }
      .header-left {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        flex-shrink: 0;
      }
      .hamburger-icon {
        font-size: 1.6rem;
        line-height: 1;
      }
      .menu-text {
        font-size: 0.8rem;
        font-weight: 700;
        letter-spacing: 1px;
        display: none;
      }
      @media (min-width: 360px) {
        .menu-text {
          display: inline;
        }
      }

      .header-center {
        flex-grow: 1;
        display: flex;
        justify-content: flex-end;
      }
      .header-search-input {
        width: 100%;
        background: #333;
        border: 1px solid #444;
        color: #fff;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        outline: none;
        transition: all 0.2s;
      }
      .header-search-input:focus {
        background: #fff;
        color: #000;
        border-color: #fff;
      }

      /* ================= 3. Sidebar ================= */
      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s;
      }
      .sidebar-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 85%;
        max-width: var(--sidebar-width);
        background: #fff;
        z-index: 2001;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        display: flex;
        flex-direction: column;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }
      .sidebar.active {
        transform: translateX(0);
      }

      .sidebar-header {
        display: flex;
        border-bottom: 2px solid #ddd;
      }
      .sidebar-tab {
        flex: 1;
        text-align: center;
        padding: 15px 0;
        font-weight: 700;
        font-size: 0.9rem;
        color: #888;
        background: #f9f9f9;
      }
      .sidebar-tab.active {
        background: #fff;
        color: #000;
        border-bottom: 2px solid var(--accent-color);
        margin-bottom: -2px;
      }
      .sidebar-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        -webkit-overflow-scrolling: touch;
      }
      .menu-link {
        display: block;
        padding: 15px 0;
        font-size: 1rem;
        font-weight: 600;
        color: #333;
        border-bottom: 1px solid #eee;
        text-transform: uppercase;
        cursor: pointer;
      }
      .brand-list {
        display: flex;
        flex-direction: column;
        gap: 0;
      }
      .brand-item {
        padding: 12px 5px;
        font-size: 0.95rem;
        color: #555;
        cursor: pointer;
        border-bottom: 1px solid #f0f0f0;
      }
      .brand-item:hover {
        color: #000;
        background: #f4f4f4;
        padding-left: 10px;
        font-weight: bold;
      }

      /* ================= 4. Bottom Nav Bar (Reseller Mode) ================= */
      .bottom-nav-bar {
        position: fixed;
        bottom: 25px;
        left: 50%;
        transform: translateX(-50%);
        width: 92%;
        max-width: 500px;
        height: 65px;
        background: #ffffff;
        z-index: 980;
        display: flex;
        align-items: stretch;
        justify-content: space-between;
        padding: 0;
        border-radius: 50px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(0, 0, 0, 0.03);
        overflow: hidden;
      }

      .nav-left {
        width: 45%;
        display: flex;
        align-items: center;
        cursor: pointer;
        padding-left: 15px;
        gap: 10px;
        background: #fff;
      }

      .nav-icon-wrap {
        position: relative;
        display: flex;
        align-items: center;
        flex-shrink: 0;
      }

      .nav-list-icon {
        width: 28px;
        height: 28px;
        stroke: #333;
        fill: none;
        stroke-width: 2;
      }

      .nav-badge {
        position: absolute;
        top: -6px;
        right: -8px;
        background-color: #000;
        color: #fff;
        font-size: 0.75rem;
        font-weight: 700;
        min-width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        z-index: 10;
      }

      .nav-info-col {
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .nav-selection-text {
        font-size: 0.85rem;
        font-weight: 700;
        color: #333;
        text-transform: uppercase;
      }
      .nav-sub-text {
        font-size: 0.7rem;
        color: #888;
      }

      .nav-right {
        width: 55%;
        height: 100%;
      }

      .checkout-pill-btn {
        width: 100%;
        height: 100%;
        background-color: #000;
        color: #fff;
        border: none;
        border-radius: 0;
        font-size: 1rem;
        font-weight: 700;
        font-family: inherit;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: background 0.2s;
      }
      .checkout-pill-btn:active {
        background-color: #333;
      }

      /* ================= BUTTON STYLES ================= */
      .action-btn-black {
        background: #fff;
        color: #000;
        border: 1px solid #000;
        padding: 10px 0;
        width: 100%;
        font-size: 0.95rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 700;
        font-family: inherit;
        display: block;
        text-transform: uppercase;
        transition: all 0.2s;
      }
      .action-btn-black:hover {
        background: #000;
        color: #fff;
      }

      .action-qty-box {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #fff;
        border: 2px solid #000;
        border-radius: 6px;
        height: 42px;
        overflow: hidden;
        width: 100%;
      }
      .qty-btn-rect {
        width: 45px;
        height: 100%;
        font-size: 1.4rem;
        font-weight: bold;
        background: #000;
        color: #fff;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
      }
      .qty-val-rect {
        flex: 1;
        font-size: 1.1rem;
        font-weight: 700;
        color: #000;
        text-align: center;
        font-family: inherit;
      }
      .btn-qty-wrapper {
        width: 100%;
        margin-top: 8px;
        min-height: 42px;
      }

      /* ================= Skeleton & Lazy Load ================= */
      @keyframes skeleton-loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }
      .skeleton-loader {
        background: #f0f0f0;
        background-image: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e0e0e0 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
      }
      img.lazy-img {
        opacity: 0;
        transition: opacity 0.4s ease-in;
      }
      img.lazy-img.loaded {
        opacity: 1;
      }

      /* ================= Home View ================= */
      #home-view {
        padding-bottom: 20px;
        display: block;
      }
      .brand-section {
        margin-bottom: 15px;
        background: #fff;
        padding: 15px 0 20px 0;
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
        scroll-margin-top: 80px;
        position: relative;
      }
      .brand-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 15px 10px 15px;
      }
      .brand-title {
        font-size: 1.1rem;
        font-weight: 700;
        color: #222;
        margin: 0;
        text-transform: uppercase;
      }
      .brand-see-all {
        font-size: 0.85rem;
        color: #666;
        text-decoration: underline;
        cursor: pointer;
        padding: 5px;
      }
      .scroll-container-wrapper {
        position: relative;
        padding: 0 5px;
      }
      .scroll-wrapper {
        display: flex;
        overflow-x: auto;
        gap: 12px;
        padding: 5px 12px 15px 12px;
        scrollbar-width: none;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
      }
      .scroll-wrapper::-webkit-scrollbar {
        display: none;
      }
      .scroll-arrow-btn {
        position: absolute;
        top: 35%;
        transform: translateY(-50%);
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        z-index: 10;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        opacity: 0;
        pointer-events: none;
        transition:
          opacity 0.3s,
          transform 0.2s;
        font-size: 1rem;
        color: #333;
        border: 1px solid #eee;
      }
      .scroll-arrow-btn.visible {
        opacity: 1;
        pointer-events: auto;
      }
      .scroll-arrow-btn.left {
        left: 2px;
      }
      .scroll-arrow-btn.right {
        right: 2px;
      }

      .scroll-progress-container {
        width: 60px;
        height: 4px;
        background: #eee;
        border-radius: 2px;
        margin: 0 auto;
        margin-top: -5px;
        overflow: hidden;
      }
      .scroll-progress-bar {
        height: 100%;
        width: 0;
        background: var(--accent-color);
        border-radius: 2px;
        transition: width 0.1s linear;
      }
      .scroll-card {
        flex: 0 0 160px;
        display: flex;
        flex-direction: column;
        background: #fff;
        cursor: pointer;
        position: relative;
        scroll-snap-align: start;
      }
      .img-wrapper {
        width: 100%;
        height: 160px;
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 8px;
        position: relative;
      }
      .img-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .badges-container {
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        z-index: 2;
      }
      .badge-tag {
        font-size: 0.65rem;
        font-weight: bold;
        color: #fff;
        padding: 3px 6px;
        margin-bottom: 2px;
        border-radius: 0 0 4px 0;
        box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        text-transform: uppercase;
      }
      .badge-hot {
        background: var(--tag-hot);
      }
      .badge-new {
        background: var(--tag-new);
      }
      .badge-sale {
        background: var(--tag-sale);
      }

      .scroll-card-title {
        font-size: 0.85rem;
        color: #333;
        margin-bottom: 4px;
        height: 2.4em;
        overflow: hidden;
        text-transform: uppercase;
        line-height: 1.2;
        font-weight: 500;
      }
      .scroll-card-info {
        font-size: 0.85rem;
        color: #666;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        min-height: 25px;
      }
      .stock-warning-text {
        font-size: 0.7rem;
        color: #d9534f;
        font-weight: bold;
        margin-right: 5px;
        background: #ffe6e6;
        padding: 1px 4px;
        border-radius: 3px;
        white-space: nowrap;
      }
      .shop-all-section {
        padding: 30px 20px;
        text-align: center;
        background: #fff;
        margin-bottom: 20px;
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
      }
      .shop-all-btn {
        background: #000;
        color: #fff;
        padding: 15px 40px;
        font-size: 1.1rem;
        font-weight: bold;
        border-radius: 30px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition: transform 0.2s;
        font-family: inherit;
      }

      /* ================= Grid View ================= */
      #grid-view {
        display: none;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px 12px;
      }
      .gallery-header-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      .gallery-title {
        font-size: 1.3rem;
        font-weight: 700;
      }
      .back-home-btn {
        font-size: 0.9rem;
        text-decoration: underline;
        cursor: pointer;
        color: #666;
        padding: 5px;
      }
      .gallery {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      @media (min-width: 768px) {
        .gallery {
          grid-template-columns: repeat(4, 1fr);
          gap: 30px;
        }
      }
      .item {
        background: #fff;
        border-radius: 8px;
        border: 1px solid #eee;
        overflow: hidden;
      }
      .item-img-box {
        height: 180px;
        width: 100%;
        position: relative;
        overflow: hidden;
      }
      .item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        cursor: pointer;
      }
      .item .caption {
        padding: 10px 8px;
        text-align: left;
      }
      .pagination-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        margin: 30px 0;
        flex-wrap: wrap;
      }
      .page-btn {
        padding: 8px 14px;
        background-color: #222;
        color: #fff;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        min-width: 36px;
        text-align: center;
        transition: all 0.2s;
        border: 1px solid transparent;
        font-family: inherit;
      }
      .page-btn:hover {
        background-color: #444;
      }
      .page-btn.active {
        background-color: #fff;
        color: #000;
        font-weight: bold;
        border: 1px solid #000;
      }

      /* ================= Trust Section (White Label) ================= */
      .trust-section {
        background: #fff;
        margin-top: 20px;
        padding: 30px 20px;
        border-top: 1px solid #eee;
      }
      .trust-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        text-align: center;
      }
      @media (min-width: 768px) {
        .trust-grid {
          grid-template-columns: repeat(2, 1fr);
          max-width: 800px;
          margin: 0 auto;
        }
      }
      .trust-item {
        padding: 20px;
        border: 1px solid #eee;
        border-radius: 8px;
        display: block;
        background: #fff;
      }
      .trust-item h4 {
        margin: 10px 0 5px;
        font-size: 1.1rem;
      }
      .trust-item p {
        font-size: 0.9rem;
        color: #666;
        margin: 0;
        line-height: 1.4;
      }

      /* ================= Modal ================= */
      .modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.85);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 15px;
      }
      .modal.open {
        display: flex;
      }
      .modal-content {
        background: #fff;
        width: 100%;
        max-width: 400px;
        border-radius: 12px;
        overflow: hidden;
        position: relative;
        text-align: center;
        padding-bottom: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }
      .modal-close {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 1.8rem;
        cursor: pointer;
        z-index: 10;
        width: 36px;
        height: 36px;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        line-height: 34px;
      }
      .modal-img {
        width: 100%;
        height: 300px;
        object-fit: cover;
        background: #f8f8f8;
      }
      .modal-info {
        padding: 8px 15px;
      }
      .modal-notes-box {
        background-color: #f7f7f7;
        border-radius: 8px;
        padding: 6px 10px;
        margin-bottom: 6px;
        text-align: left;
        border: 1px solid #eee;
      }
      .modal-notes-title {
        font-size: 0.7rem;
        font-weight: 700;
        color: #999;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 2px;
        display: block;
      }
      .modal-notes-text {
        font-size: 0.85rem;
        color: #444;
        line-height: 1.3;
        font-family: Georgia, serif;
        font-style: italic;
      }
      .gender-tag {
        display: inline-block;
        font-size: 0.7rem;
        padding: 1px 6px;
        border-radius: 4px;
        margin-left: 5px;
        vertical-align: middle;
        font-weight: 600;
        letter-spacing: 0.5px;
      }
      .gender-tag.women {
        color: #c2185b;
        background: #fce4ec;
        border: 1px solid #f8bbd0;
      }
      .gender-tag.men {
        color: #1565c0;
        background: #e3f2fd;
        border: 1px solid #bbdefb;
      }
      .gender-tag.unisex {
        color: #455a64;
        background: #eceff1;
        border: 1px solid #cfd8dc;
      }

      /* Toast Message */
      #toast {
        visibility: hidden;
        min-width: 200px;
        background-color: rgba(0, 0, 0, 0.9);
        color: #fff;
        text-align: center;
        border-radius: 30px;
        padding: 12px 20px;
        position: fixed;
        z-index: 9999;
        left: 50%;
        bottom: 120px;
        transform: translateX(-50%);
        font-size: 0.95rem;
        font-weight: 500;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        opacity: 0;
        transition: all 0.3s;
      }
      #toast.show {
        visibility: visible;
        opacity: 1;
        bottom: 130px;
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="header-left" id="menu-trigger">
        <span class="hamburger-icon">‚ò∞</span>
        <span class="menu-text" style="margin-left: 5px">CATALOG</span>
      </div>
      <div class="header-center">
        <input
          type="text"
          id="global-search-input"
          class="header-search-input"
          placeholder="Search Item or SKU..."
        />
      </div>
    </header>

    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-tab active">CATALOG</div>
      </div>
      <div class="sidebar-content">
        <nav>
          <a class="menu-link" onclick="handleMenuClick('Home')">Home</a>
          <a class="menu-link" onclick="handleMenuClick('All')">View All</a>
          <a
            class="menu-link"
            onclick="handleMenuClick('Gender:Women')"
            style="color: #c2185b"
            >For Her üë©</a
          >
          <a
            class="menu-link"
            onclick="handleMenuClick('Gender:Men')"
            style="color: #1565c0"
            >For Him üë®</a
          >
          <a
            class="menu-link"
            onclick="handleMenuClick('Gender:Unisex')"
            style="color: #455a64"
            >Unisex ‚ö§</a
          >
          <a
            class="menu-link"
            onclick="scrollToBrand('Set')"
            style="color: #6a1b9a"
            >Gift Sets üéÅ</a
          >
          <a class="menu-link" onclick="handleMenuClick('BestSellers')"
            >Best Sellers üî•</a
          >
          <a class="menu-link" onclick="handleMenuClick('New')"
            >New Arrivals üÜï</a
          >
        </nav>
        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee" />
        <div
          style="
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #999;
            letter-spacing: 1px;
          "
        >
          BRANDS
        </div>
        <div class="brand-list" id="brand-list-container"></div>
        <div style="height: 50px"></div>
      </div>
    </div>

    <div id="home-view">
      <div id="home-content">
        <div class="loading-container">
          <div style="padding: 20px; text-align: center; color: #999">
            Loading Catalog...
          </div>
        </div>
      </div>
    </div>

    <div id="grid-view">
      <div class="gallery-header-bar">
        <div class="gallery-title" id="grid-title">Results</div>
        <div class="back-home-btn" onclick="handleMenuClick('Home')">
          Back to Home
        </div>
      </div>
      <div class="gallery" id="gallery"></div>
      <div id="pagination-controls" class="pagination-container"></div>
    </div>

    <div class="trust-section">
      <div class="trust-grid">
        <div class="trust-item">
          <div style="font-size: 2rem; margin-bottom: 10px">üá∫üá∏</div>
          <h4>USA Warehouse</h4>
          <p>Local stock, fast processing.</p>
        </div>
        <div class="trust-item">
          <div style="font-size: 2rem; margin-bottom: 10px">üì¶</div>
          <h4>Authentic Quality</h4>
          <p>100% Original Products.</p>
        </div>
      </div>
    </div>

    <div class="bottom-nav-bar">
      <div
        class="nav-left"
        onclick="showToast('Use +/- on items to manage list')"
      >
        <div class="nav-icon-wrap">
          <svg
            class="nav-list-icon"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="8" y1="6" x2="21" y2="6"></line>
            <line x1="8" y1="12" x2="21" y2="12"></line>
            <line x1="8" y1="18" x2="21" y2="18"></line>
            <line x1="3" y1="6" x2="3.01" y2="6"></line>
            <line x1="3" y1="12" x2="3.01" y2="12"></line>
            <line x1="3" y1="18" x2="3.01" y2="18"></line>
          </svg>
          <div id="bottom-bar-badge" class="nav-badge" style="display: none">
            0
          </div>
        </div>

        <div class="nav-info-col">
          <div id="bottom-bar-text" class="nav-selection-text">0 SELECTED</div>
          <div class="nav-sub-text">Build your order list</div>
        </div>
      </div>

      <div class="nav-right">
        <button class="checkout-pill-btn" onclick="copyListToClipboard()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            fill="currentColor"
            viewBox="0 0 16 16"
          >
            <path
              d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"
            />
            <path
              d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"
            />
          </svg>
          COPY LIST
        </button>
      </div>
    </div>

    <div id="toast">List Copied! Send to your agent.</div>

    <div id="modal" class="modal">
      <div class="modal-content">
        <div class="modal-close" onclick="closeModal()">&times;</div>
        <img id="modal-img" class="modal-img" src="" />
        <div class="modal-info">
          <h3
            id="modal-title"
            style="margin: 5px 0 2px 0; font-size: 1.1rem; line-height: 1.2"
          ></h3>
          <div
            id="modal-sub"
            style="color: #666; font-size: 0.85rem; margin-bottom: 8px"
          ></div>
          <div id="modal-stock" style="margin-bottom: 8px"></div>
          <div id="modal-action-area" style="margin-top: 15px"></div>
        </div>
      </div>
    </div>

    <script src="db.js"></script>
    <script>
      // ================= Config & State =================
      const FEATURED_BRANDS = [
        "Creed",
        "Dior",
        "Chanel",
        "Tom Ford",
        "Yves Saint Laurent",
        "Louis Vuitton",
        "Gucci",
        "Carolina Herrera",
        "Valentino",
        "Maison Francis Kurkdjian",
        "Parfums de Marly",
        "Jean Paul Gaultier",
        "Xerjoff",
        "Bond No. 9",
        "Initio",
        "Paco Rabanne",
        "Giorgio Armani",
        "Burberry",
        "Versace",
      ];
      const FEATURED_BRANDS_LOWER = FEATURED_BRANDS.map((b) => b.toLowerCase());

      let cartItems = [];
      let currentPage = 1;
      const itemsPerPage = 20;
      let currentGridData = [];
      let viewMode = "home";
      let currentModalProductId = null;
      let dbLoaded = false;

      // ================= Initialization =================
      document.addEventListener("DOMContentLoaded", () => {
        loadCart();
        setupMenu();
        renderSidebarBrands();
        setupSearch();
        setupModalBackdropClosing();

        const checkDataInterval = setInterval(() => {
          if (window.perfumeDB && window.perfumeDB.length > 0) {
            clearInterval(checkDataInterval);
            dbLoaded = true;
            renderHome();

            const urlParams = new URLSearchParams(window.location.search);
            const skuParam = urlParams.get("sku");
            if (skuParam) {
              setTimeout(() => openModalById(skuParam), 300);
            }
          }
        }, 50);
      });

      window.addEventListener("pageshow", function (event) {
        loadCart();
        if (dbLoaded) {
          if (viewMode === "home") renderHome();
          else renderGridPage();
        }
      });

      // ================= Search Helpers & Sidebar (Restored) =================
      const BRAND_ALIASES = {
        lv: "Louis Vuitton",
        "louis vuitton": "Louis Vuitton",
        louis: "Louis Vuitton",
        ysl: "Yves Saint Laurent",
        yves: "Yves Saint Laurent",
        saint: "Yves Saint Laurent",
        tf: "Tom Ford",
        tom: "Tom Ford",
        ford: "Tom Ford",
        creed: "Creed",
        dior: "Dior",
        chanel: "Chanel",
        gucci: "Gucci",
        pdm: "Parfums de Marly",
        marly: "Parfums de Marly",
        mfk: "Maison Francis Kurkdjian",
        kurkdjian: "Maison Francis Kurkdjian",
        valentino: "Valentino",
        versace: "Versace",
        armani: "Giorgio Armani",
        "giorgio armani": "Giorgio Armani",
        burberry: "Burberry",
        lattafa: "Lattafa",
        kayali: "Kayali",
        bond: "Bond No. 9",
        "bond no 9": "Bond No. 9",
        jpg: "JEAN PAUL GAULTIER",
      };

      function detectBrandIntent(raw) {
        const low = raw.toLowerCase().trim();
        for (const [k, v] of Object.entries(BRAND_ALIASES)) {
          if (low.includes(k)) return v;
        }
        return null;
      }

      function normalizeAndTokenize(raw) {
        return raw
          .toLowerCase()
          .trim()
          .split(/\s+/)
          .filter((t) => t.length > 0);
      }

      function calculateRelevanceScore(p, tokens) {
        let score = 0;
        const s = (p.id + p.name + p.brand).toLowerCase();
        tokens.forEach((t) => {
          if (s.includes(t)) score += 10;
          // Exact ID match boost
          if (p.id.toLowerCase() === t) score += 50;
        });
        return score;
      }

      function setupSearch() {
        const input = document.getElementById("global-search-input");
        input.addEventListener("change", (e) => {
          const val = e.target.value.trim();
          if (val) switchToGrid("Search:" + val);
        });
      }

      function renderSidebarBrands() {
        const list = document.getElementById("brand-list-container");
        if (!list) return;
        list.innerHTML = "";
        FEATURED_BRANDS.forEach((brand) => {
          const div = document.createElement("div");
          div.className = "brand-item";
          div.textContent =
            brand === "Yves Saint Laurent" ? "YSL" : brand.toUpperCase();
          div.onclick = () => scrollToBrand(brand);
          list.appendChild(div);
        });
        const otherDiv = document.createElement("div");
        otherDiv.className = "brand-item";
        otherDiv.style.cssText =
          "font-weight: bold; margin-top: 10px; color: #000; border-bottom: none;";
        otherDiv.textContent = "OTHER BRANDS";
        otherDiv.onclick = () => scrollToBrand("Other");
        list.appendChild(otherDiv);
      }

      // ================= "Selection List" Logic =================
      function loadCart() {
        cartItems = JSON.parse(
          localStorage.getItem("perfumeSelection") || "[]",
        );
        updateBottomBarData();
      }
      function saveCart() {
        localStorage.setItem("perfumeSelection", JSON.stringify(cartItems));
        updateBottomBarData();
      }

      function updateBottomBarData() {
        const totalQty = cartItems.reduce((s, i) => s + i.quantity, 0);
        const badgeEl = document.getElementById("bottom-bar-badge");
        if (totalQty > 0) {
          badgeEl.textContent = totalQty;
          badgeEl.style.display = "flex";
        } else {
          badgeEl.style.display = "none";
        }
        const textEl = document.getElementById("bottom-bar-text");
        textEl.textContent =
          totalQty === 0 ? "NO ITEMS" : `${totalQty} SELECTED`;
      }

      window.copyListToClipboard = function () {
        if (cartItems.length === 0) return showToast("List is empty");

        let msg = `*Order Request List*\n------------------\n`;
        cartItems.forEach((item) => {
          msg += `${item.caption} x ${item.quantity}\n`;
        });
        msg += `------------------\nTotal Items: ${cartItems.reduce((s, i) => s + i.quantity, 0)}\n`;

        navigator.clipboard
          .writeText(msg)
          .then(() => {
            showToast("Copied! Send to your seller.");
          })
          .catch((err) => {
            showToast("Error copying. Please screenshot.");
            console.error("Copy failed", err);
          });
      };

      function formatSizeRaw(ml) {
        if (!ml) return "";
        return ml.toString().includes("ml") ? ml : ml + "ml";
      }

      window.updateItemQty = function (id, delta) {
        const db = window.perfumeDB;
        const product = db.find((p) => p.id === id);
        if (!product) return;

        let existing = cartItems.find((c) => c.name === id);
        let sizeLabel = product.ml
          ? isNaN(Number(product.ml))
            ? `(${product.ml})`
            : `(${product.ml}ml)`
          : "";
        let captionStr = `${id} - ${product.name} ${sizeLabel}`;

        if (!existing && delta > 0) {
          cartItems.push({
            name: id,
            caption: captionStr,
            brand: product.brand,
            ml: product.ml,
            quantity: 1,
          });
          showToast("Added to List üìù");
        } else if (existing) {
          existing.quantity += delta;
          if (existing.quantity <= 0)
            cartItems = cartItems.filter((c) => c.name !== id);
        }
        saveCart();

        const newBtnHtml = getAddButtonHtml(id);
        const scrollBtnWrap = document.getElementById(`btn-wrap-${id}`);
        if (scrollBtnWrap) scrollBtnWrap.innerHTML = newBtnHtml;
        const gridBtnWrap = document.getElementById(`btn-wrap-grid-${id}`);
        if (gridBtnWrap) gridBtnWrap.innerHTML = newBtnHtml;
        if (currentModalProductId === id) updateModalButtonState(id);
      };

      function getCartQty(id) {
        const item = cartItems.find((c) => c.name === id);
        return item ? item.quantity : 0;
      }

      function getAddButtonHtml(id) {
        const qty = getCartQty(id);
        if (qty === 0) {
          return `<button class="action-btn-black" onclick="updateItemQty('${id}', 1); event.stopPropagation();">ADD TO LIST</button>`;
        } else {
          return `
                <div class="action-qty-box">
                    <div class="qty-btn-rect" onclick="updateItemQty('${id}', -1); event.stopPropagation();">-</div>
                    <div class="qty-val-rect">${qty}</div>
                    <div class="qty-btn-rect" onclick="updateItemQty('${id}', 1); event.stopPropagation();">+</div>
                </div>`;
        }
      }

      function updateModalButtonState(id) {
        const container = document.getElementById("modal-action-area");
        if (container) container.innerHTML = getAddButtonHtml(id);
      }

      // ================= Rendering Logic =================
      function getStockHtml(inventory) {
        if (inventory && !isNaN(inventory) && inventory > 0 && inventory < 50) {
          return `<span class="stock-warning-text">Low Stock: ${inventory}</span>`;
        }
        return "";
      }

      function formatSize(item) {
        if (!item.ml) return "";
        if (isNaN(Number(item.ml))) return item.ml;
        const ml = parseInt(item.ml);
        const flOz = (ml / 29.57).toFixed(1);
        return `${ml}ml <span style="color:#999;font-weight:normal">(${flOz} oz)</span>`;
      }

      function getGenderClass(genderText) {
        if (!genderText) return "unisex";
        const g = genderText.toLowerCase();
        if (g.includes("women") || g.includes("female")) return "women";
        if (g.includes("men") || g.includes("male")) return "men";
        return "unisex";
      }

      function generatePictureHTML(src, alt) {
        const webpSrc = src.replace(/\.(jpg|png|jpeg)$/i, ".webp");
        return `<div class="img-wrapper skeleton-loader"><picture><source srcset="${webpSrc}" type="image/webp"><img src="${src}" alt="${alt}" loading="lazy" class="lazy-img" onload="this.classList.add('loaded'); this.parentElement.parentElement.classList.remove('skeleton-loader');" onerror="this.parentElement.parentElement.classList.remove('skeleton-loader');"></picture></div>`;
      }

      function renderHome() {
        const db = (window.perfumeDB || []).filter(
          (p) => parseInt(p.stock) > 0,
        );
        const container = document.getElementById("home-content");
        if (!container) return;
        container.innerHTML = "";

        const renderSection = (title, items, filterKey) => {
          const section = createBrandSection(title, items, filterKey);
          if (
            filterKey &&
            !["BestSellers", "New", "Sale"].includes(filterKey)
          ) {
            section.id = "brand-" + filterKey.replace(/\s+/g, "");
          }
          container.appendChild(section);
        };

        const bestSellers = db.filter((p) => p.top == 1);
        if (bestSellers.length > 0)
          renderSection("üî• Best Sellers", bestSellers, "BestSellers");

        const newArrivals = db.filter((p) => p.new == 1);
        if (newArrivals.length > 0)
          renderSection("üÜï New Arrivals", newArrivals, "New");

        const renderedBrands = new Set();
        FEATURED_BRANDS.forEach((brand) => {
          const products = db.filter((p) =>
            p.brand.toLowerCase().includes(brand.toLowerCase()),
          );
          if (products.length >= 3) {
            let displayName =
              brand === "Yves Saint Laurent" ? "YSL" : brand.toUpperCase();
            renderSection(displayName, products, brand);
            renderedBrands.add(brand);
          }
        });

        const otherProducts = db.filter((p) => {
          for (let featured of renderedBrands) {
            if (p.brand.toLowerCase().includes(featured.toLowerCase()))
              return false;
          }
          return true;
        });

        if (otherProducts.length > 0) {
          const otherSection = createBrandSection(
            "Other Brands",
            otherProducts,
            "Other",
          );
          otherSection.id = "brand-Other";
          container.appendChild(otherSection);
        }

        const setItems = db.filter((p) => p.name.toUpperCase().includes("SET"));
        if (setItems.length > 0) renderSection("üéÅ Gift Sets", setItems, "Set");

        const shopAllContainer = document.createElement("div");
        shopAllContainer.className = "shop-all-section";
        shopAllContainer.innerHTML = `<button class="shop-all-btn" onclick="handleMenuClick('All')">View All Products</button>`;
        container.appendChild(shopAllContainer);
      }

      function createBrandSection(title, products, filterKey) {
        const section = document.createElement("div");
        section.className = "brand-section";
        const cleanFilterKey =
          filterKey || (title.includes("Best") ? "BestSellers" : "All");

        const header = document.createElement("div");
        header.className = "brand-header";
        header.innerHTML = `<h2 class="brand-title">${title}</h2><div class="brand-see-all" onclick="switchToGrid('${cleanFilterKey}')">See All ></div>`;
        section.appendChild(header);

        const wrapperContainer = document.createElement("div");
        wrapperContainer.className = "scroll-container-wrapper";
        const leftBtn = document.createElement("div");
        leftBtn.className = "scroll-arrow-btn left";
        leftBtn.innerHTML = "&#10094;";
        const rightBtn = document.createElement("div");
        rightBtn.className = "scroll-arrow-btn right";
        rightBtn.innerHTML = "&#10095;";
        const wrapper = document.createElement("div");
        wrapper.className = "scroll-wrapper";

        products.slice(0, 15).forEach((p) => {
          const card = document.createElement("div");
          card.className = "scroll-card";
          card.onclick = (e) => {
            if (
              e.target.closest(".action-btn-black") ||
              e.target.closest(".action-qty-box")
            )
              return;
            openModal(p);
          };

          let badgesHtml = "";
          if (p.top == 1)
            badgesHtml += '<div class="badge-tag badge-hot">HOT</div>';
          if (p.new == 1)
            badgesHtml += '<div class="badge-tag badge-new">NEW</div>';

          const imgHtml = generatePictureHTML(p.img, p.name);
          const genderClass = getGenderClass(p.gender);
          const genderHtml = p.gender
            ? `<span class="gender-tag ${genderClass}">${p.gender}</span>`
            : "";
          const stockHtml = getStockHtml(p.inventory);
          const buttonHtml = getAddButtonHtml(p.id);

          card.innerHTML = `
            <div style="position:relative;">${imgHtml}<div class="badges-container">${badgesHtml}</div></div>
            <div style="padding: 0 5px 5px 5px; display:flex; flex-direction:column; flex:1;">
                <div class="scroll-card-title">${p.id}-${p.name}</div>
                <div style="display:flex; align-items:center; margin-bottom:4px; flex-wrap:wrap;">
                    <span style="font-size:0.75rem; color:#666; font-weight:600;">${p.brand}</span>
                    ${genderHtml}
                </div>
                <div class="scroll-card-info">
                   ${stockHtml}
                   <span style="font-size:0.75rem; color:#666; margin-left:auto;">${p.ml ? formatSize(p) : ""}</span>
                </div>
                <div class="btn-qty-wrapper" id="btn-wrap-${p.id}">${buttonHtml}</div>
            </div>
          `;
          wrapper.appendChild(card);
        });

        const progressContainer = document.createElement("div");
        progressContainer.className = "scroll-progress-container";
        const progressBar = document.createElement("div");
        progressBar.className = "scroll-progress-bar";
        progressContainer.appendChild(progressBar);
        wrapperContainer.appendChild(leftBtn);
        wrapperContainer.appendChild(wrapper);
        wrapperContainer.appendChild(rightBtn);
        section.appendChild(wrapperContainer);
        section.appendChild(progressContainer);

        const updateControls = () => {
          const maxScroll = wrapper.scrollWidth - wrapper.clientWidth;
          const scrollLeft = wrapper.scrollLeft;
          leftBtn.classList.toggle("visible", scrollLeft > 10);
          rightBtn.classList.toggle("visible", scrollLeft < maxScroll - 10);
          if (maxScroll > 0) {
            progressBar.style.width =
              Math.max(10, (scrollLeft / maxScroll) * 100) + "%";
          } else {
            progressBar.style.width = "100%";
          }
        };
        leftBtn.onclick = () =>
          wrapper.scrollBy({ left: -200, behavior: "smooth" });
        rightBtn.onclick = () =>
          wrapper.scrollBy({ left: 200, behavior: "smooth" });
        wrapper.addEventListener("scroll", updateControls);
        setTimeout(updateControls, 100);

        return section;
      }

      function switchToGrid(criteria) {
        viewMode = "grid";
        document.getElementById("home-view").style.display = "none";
        document.getElementById("grid-view").style.display = "block";
        window.scrollTo({ top: 0, behavior: "smooth" });

        const db = (window.perfumeDB || []).filter(
          (p) => parseInt(p.stock) > 0,
        );
        let filtered = [];
        let title = "";

        if (criteria === "All") {
          filtered = db;
          title = "All Products";
        } else if (criteria === "BestSellers") {
          filtered = db.filter((p) => p.top == 1);
          title = "Best Sellers";
        } else if (criteria === "New") {
          filtered = db.filter((p) => p.new == 1);
          title = "New Arrivals";
        } else if (criteria === "Set") {
          filtered = db.filter((p) => p.name.toUpperCase().includes("SET"));
          title = "Gift Sets";
        } else if (criteria.startsWith("Gender:")) {
          const targetGender = criteria.split(":")[1];
          filtered = db.filter((p) => {
            if (!p.gender) return false;
            return getGenderClass(p.gender) === targetGender.toLowerCase();
          });
          title = targetGender;
        } else if (criteria.startsWith("Search:")) {
          const rawTerm = criteria.replace("Search:", "").trim();
          const targetBrand = detectBrandIntent(rawTerm);
          const searchTokens = normalizeAndTokenize(rawTerm);
          if (targetBrand) {
            filtered = db.filter(
              (p) => p.brand.toLowerCase() === targetBrand.toLowerCase(),
            );
            title = targetBrand;
          } else {
            let scoredProducts = db
              .map((p) => ({
                product: p,
                score: calculateRelevanceScore(p, searchTokens),
              }))
              .filter((i) => i.score > 0);
            scoredProducts.sort((a, b) => b.score - a.score);
            filtered = scoredProducts.map((i) => i.product);
            title = `Results: "${rawTerm}"`;
          }
        } else if (criteria === "Other") {
          filtered = db.filter((p) => {
            const b = p.brand ? p.brand.toLowerCase() : "";
            return b && !FEATURED_BRANDS_LOWER.includes(b);
          });
          title = "More Brands";
        } else {
          filtered = db.filter((p) => p.brand === criteria);
          title = criteria;
        }

        document.getElementById("grid-title").textContent = title;
        currentGridData = filtered;
        currentPage = 1;
        renderGridPage();
      }

      function renderGridPage() {
        const gallery = document.getElementById("gallery");
        gallery.innerHTML = "";
        const totalPages = Math.ceil(currentGridData.length / itemsPerPage);
        renderPagination(totalPages, currentPage);

        if (currentGridData.length === 0) {
          gallery.innerHTML =
            "<div style='grid-column:1/-1;text-align:center;padding:50px;color:#999;'>No items found.</div>";
          return;
        }
        const start = (currentPage - 1) * itemsPerPage;
        const pageItems = currentGridData.slice(start, start + itemsPerPage);

        pageItems.forEach((p) => {
          const div = document.createElement("div");
          div.className = "item";
          let badgesHtml = "";
          if (p.top == 1)
            badgesHtml += '<div class="badge-tag badge-hot">HOT</div>';
          if (p.new == 1)
            badgesHtml += '<div class="badge-tag badge-new">NEW</div>';

          const webpSrc = p.img.replace(/\.(jpg|png|jpeg)$/i, ".webp");
          const genderClass = getGenderClass(p.gender);
          const genderText = p.gender
            ? ` ¬∑ <span class="gender-tag ${genderClass}">${p.gender}</span>`
            : "";
          const stockHtml = getStockHtml(p.inventory);
          const buttonHtml = getAddButtonHtml(p.id);

          div.innerHTML = `
              <div class="item-img-box skeleton-loader" onclick="openModalById('${p.id}')">
                  <picture><source srcset="${webpSrc}" type="image/webp"><img src="${p.img}" loading="lazy" class="lazy-img" onload="this.classList.add('loaded'); this.parentElement.parentElement.classList.remove('skeleton-loader');" onerror="this.parentElement.parentElement.classList.remove('skeleton-loader');"></picture>
                  <div class="badges-container">${badgesHtml}</div>
              </div>
              <div class="caption">
                 <div style="font-size:0.85rem; height:2.4em; overflow:hidden; margin-bottom:5px; line-height:1.2;">${p.id}-${p.name}</div>
                 <div style="font-size:0.8rem; color:#888; margin-bottom:5px;">${p.brand}${genderText} <br> ${formatSize(p)}</div>
                 <div style="font-weight:bold; font-size:0.9rem; margin-bottom:5px;">${stockHtml}</div>
                 <div class="btn-qty-wrapper" id="btn-wrap-grid-${p.id}">${buttonHtml}</div>
              </div>
           `;
          gallery.appendChild(div);
        });
      }

      function renderPagination(totalPages, activePage) {
        const container = document.getElementById("pagination-controls");
        if (!container) return;
        container.innerHTML = "";
        if (totalPages <= 1) {
          container.style.display = "none";
          return;
        }
        container.style.display = "flex";

        const createBtn = (
          text,
          page,
          isActive = false,
          isDisabled = false,
        ) => {
          const btn = document.createElement("button");
          btn.className = `page-btn ${isActive ? "active" : ""}`;
          btn.textContent = text;
          if (isDisabled) btn.disabled = true;
          else
            btn.onclick = () => {
              currentPage = page;
              renderGridPage();
              window.scrollTo({ top: 0, behavior: "smooth" });
            };
          return btn;
        };

        container.appendChild(
          createBtn("Prev", activePage - 1, false, activePage === 1),
        );
        const pages = [];
        if (totalPages <= 7) {
          for (let i = 1; i <= totalPages; i++) pages.push(i);
        } else {
          pages.push(1);
          if (activePage > 3) pages.push("...");
          let s = Math.max(2, activePage - 1),
            e = Math.min(totalPages - 1, activePage + 1);
          if (activePage === 1) e = 3;
          if (activePage === totalPages) s = totalPages - 2;
          for (let i = s; i <= e; i++) pages.push(i);
          if (activePage < totalPages - 2) pages.push("...");
          pages.push(totalPages);
        }
        pages.forEach((p) => {
          if (p === "...") {
            const span = document.createElement("span");
            span.textContent = "...";
            span.style.padding = "0 5px";
            span.style.color = "#999";
            container.appendChild(span);
          } else container.appendChild(createBtn(p, p, p === activePage));
        });
        container.appendChild(
          createBtn("Next", activePage + 1, false, activePage === totalPages),
        );
      }

      window.openModal = function (product) {
        currentModalProductId = product.id;
        document.getElementById("modal-img").src = product.img;
        document.getElementById("modal-title").textContent =
          `${product.id}-${product.name}`;

        const notesContent = product.Notes || product.notes;
        let notesHtml = "";
        if (notesContent && notesContent.trim() !== "") {
          notesHtml = `<div class="modal-notes-box"><span class="modal-notes-title">Fragrance Notes</span><span class="modal-notes-text">${notesContent}</span></div>`;
        }

        const genderClass = getGenderClass(product.gender);
        document.getElementById("modal-sub").innerHTML =
          `<div style="font-size:1.1rem; color:#333; margin-bottom:5px;">${product.brand}</div><div style="margin-bottom:8px; font-size:0.85rem; color:#555; display:flex; align-items:center; justify-content:center;"><span class="gender-tag ${genderClass}" style="font-size:0.8rem; margin:0 5px 0 0;">${product.gender || "Unisex"}</span><span style="color:#ccc">|</span> <span style="margin-left:5px">${formatSize(product)}</span></div>${notesHtml}`;

        const stockEl = document.getElementById("modal-stock");
        const stockVal = getStockHtml(product.inventory);
        if (stockVal) {
          stockEl.innerHTML = `<div style="color:#d9534f; font-weight:bold; font-size:0.95rem; border:1px solid #d9534f; display:inline-block; padding:3px 10px; border-radius:4px; background:#fff0f0;">üî• Fast Moving: Only ${product.inventory} Left!</div>`;
          stockEl.style.display = "block";
        } else {
          stockEl.style.display = "none";
        }

        updateModalButtonState(product.id);
        document.getElementById("modal").classList.add("open");
      };

      window.openModalById = function (id) {
        if (!window.perfumeDB) return;
        const p = window.perfumeDB.find((x) => x.id === id);
        if (p) openModal(p);
      };

      window.closeModal = function () {
        document.getElementById("modal").classList.remove("open");
        currentModalProductId = null;
      };

      function handleMenuClick(action) {
        document.getElementById("sidebar").classList.remove("active");
        document.getElementById("sidebar-overlay").classList.remove("active");
        if (action === "Home") {
          viewMode = "home";
          document.getElementById("home-view").style.display = "block";
          document.getElementById("grid-view").style.display = "none";
          window.scrollTo({ top: 0 });
        } else switchToGrid(action);
      }
      function scrollToBrand(brandName) {
        if (viewMode !== "home") {
          document.getElementById("home-view").style.display = "block";
          document.getElementById("grid-view").style.display = "none";
          viewMode = "home";
        }
        document.getElementById("sidebar").classList.remove("active");
        document.getElementById("sidebar-overlay").classList.remove("active");
        setTimeout(() => {
          const safeName =
            brandName === "Other" ? "Other" : brandName.replace(/\s+/g, "");
          const targetId = "brand-" + safeName;
          const element = document.getElementById(targetId);
          if (element) {
            const headerOffset = 65;
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition =
              elementPosition + window.pageYOffset - headerOffset;
            window.scrollTo({ top: offsetPosition, behavior: "smooth" });
          } else switchToGrid(brandName === "Other" ? "Other" : brandName);
        }, 50);
      }
      function setupMenu() {
        const trigger = document.getElementById("menu-trigger");
        const overlay = document.getElementById("sidebar-overlay");
        const sidebar = document.getElementById("sidebar");
        function toggle() {
          sidebar.classList.toggle("active");
          overlay.classList.toggle("active");
        }
        trigger.onclick = toggle;
        overlay.onclick = toggle;
      }
      function showToast(msg) {
        const t = document.getElementById("toast");
        t.textContent = msg;
        t.classList.add("show");
        setTimeout(() => t.classList.remove("show"), 2000);
      }
      function setupModalBackdropClosing() {
        document.querySelectorAll(".modal").forEach((o) =>
          o.addEventListener("click", (e) => {
            if (e.target === o) {
              o.classList.remove("open");
              currentModalProductId = null;
            }
          }),
        );
      }
    </script>
  </body>
</html>
